# ÐÐ³Ñ€ÐµÐ³Ð°Ñ‚Ð¾Ñ€ API:

## Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»:

Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð²Ñ‹Ð±Ð¾Ñ€Ð° API (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ñ…Ð¾Ñ‚Ð¸Ð¼ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ñ‚ÐµÐ¼Ð¿ÐµÑ€Ð°Ñ‚ÑƒÑ€Ñƒ Ð·Ð° Ñ‚Ð°ÐºÑƒÑŽ Ñ‚Ð¾ Ð´Ð°Ñ‚Ñƒ Ð² Ñ‚Ð°ÐºÐ¾Ð¼ Ñ‚Ð¾ Ð³Ð¾Ñ€Ð¾Ð´Ðµ) -> Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð² Ð¿Ð¾Ð»Ð·ÑƒÐ½ÐºÐ°Ñ… Ð´Ð°Ñ‚Ñƒ, Ð²Ñ€ÐµÐ¼Ñ, Ð³Ð¾Ñ€Ð¾Ð´ (Ð² Ð»Ð¾Ð³Ð¸ÐºÐµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ°ÐºÐ¾Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½ÑƒÐ¶Ð½Ð¾ ÑÑ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ðº API) -> Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚.

Ð² Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ 
Ð´Ð¾Ð¼ÐµÐ½, 
ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ñ (Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ ÑÐ²ÑÐ·Ð¸ Ð¾Ð´Ð¸Ð½ ÐºÐ¾ Ð¼Ð½Ð¾Ð³Ð¸Ð¼ - ÐºÐ¾Ð³Ð´Ð° Ñƒ Ð¾Ð´Ð½Ð¾Ð¹ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸ Ð¼Ð½Ð¾Ð³Ð¾ API), 
ÑÐ°Ð¼Ð° ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° API
?ÐºÐ°Ðº Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ Ð¿Ð¾ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼Ñƒ Ð´ÐµÐ»Ð°ÐµÑ‚ÑÑ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ.

```
aquamadi/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/      # GitHub Actions (CI/CD)
â”œâ”€â”€ migrations/          # SQLX Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs         # Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°
â”‚   â”œâ”€â”€ api/            # Ð Ð¾ÑƒÑ‚Ñ‹, Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸
â”‚   â”œâ”€â”€ config/         # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ (env, settings)
â”‚   â”œâ”€â”€ database/       # ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Postgres, Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸
â”‚   â”œâ”€â”€ models/         # DTO, ÑÑƒÑ‰Ð½Ð¾ÑÑ‚Ð¸ Ð‘Ð”
â”‚   â”œâ”€â”€ services/       # Ð‘Ð¸Ð·Ð½ÐµÑ-Ð»Ð¾Ð³Ð¸ÐºÐ°, Ð°Ð³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…
â”‚   â”œâ”€â”€ auth/           # JWT, middleware
â”‚   â””â”€â”€ error.rs        # ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸
â”œâ”€â”€ docker-compose.yml  # Docker-ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ
â”œâ”€â”€ .env                # ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ (Ð½Ðµ Ð² Ð³Ð¸Ñ‚Ðµ!)
â”œâ”€â”€ .gitignore          # Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ .env, target/, etc.
â””â”€â”€ Cargo.toml          # Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Rust
```

```
[dependencies]
axum = "0.7"
tokio = { version = "1.0", features = ["full"] }
sqlx = { version = "0.7", features = ["postgres", "runtime-tokio"] }
tracing = "0.1"
serde = { version = "1.0", features = ["derive"] }
tracing-subscriber = "0.3"
dotenvy = "0.15"  # Ð”Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ .env
```

```--no-default-features --features postgres``` 

- ÑÑ‚Ð¸ Ñ„Ð»Ð°Ð³Ð¸ Ð½ÑƒÐ¶Ð½Ñ‹ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð»Ð¸ÑˆÐ½Ð¸Ñ… Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹.

## ÐšÐ°Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚?

feature/Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ-ÑÐ²Ð¾ÐµÐ¹-Ñ„Ð¸Ñ‡Ð¸

ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚, Ð¿ÑƒÑˆ, ÑÐ¾Ð³Ð»Ð°ÑÐ¾Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° Ð¼Ñ‘Ñ€Ð¶

## Postgres, Docker

Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð´Ð¾ÐºÐµÑ€Ð° (ÐµÑÐ»Ð¸ ÐµÐ³Ð¾ Ð½ÐµÑ‚).

### linux

https://docs.docker.com/engine/install/

### windows

https://docs.docker.com/desktop/setup/install/windows-install/

## Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð° Ñ Postgresql

### .env

    Ð”Ð¸ÑÐºÐ»ÐµÐ¹Ð¼ÐµÑ€!
    ÐœÐ¾Ð¶Ð½Ð¾ Ð² Ñ†ÐµÐ»Ð¾Ð¼ ÑÐ¿Ð°Ð»Ð¸Ñ‚ÑŒ .env Ð² README, Ð²ÐµÐ´ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð² Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ ÑƒÑ‡ÐµÐ±Ð½Ñ‹Ð¹. ÐÐ¾ Ð² Ð¿Ñ€Ð¾Ð´Ðµ - Ð½Ð¸Ð·Ð·Ñ! :)


>Ð Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ! Ð½Ðµ ÐºÐ¾Ð¿Ð¸Ð¿Ð°ÑÑ‚Ð¸Ñ‚ÑŒ! Ð¡Ð¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾, ÑÑ‚Ð¾ .env Ñ„Ð°Ð¹Ð». Ð•Ð³Ð¾ Ð½Ð¸ Ð² ÐºÐ¾ÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ðµ Ð½ÐµÐ»ÑŒÐ·Ñ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð¸Ñ‚ÑŒ, Ð¾Ð½ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒÑÑ Ð² gitignore

Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ð¼ÐµÐ¼ Ð´Ð»Ñ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ñ.

https://t.me/bugnotfeature/16322

Ð’ ÐºÐ¾Ñ€Ð½Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° ÑÐ¾Ð·Ð´Ð°Ñ‘Ð¼ Ñ„Ð°Ð¹Ð» `.env` Ñ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ñ‹Ð¼:

```
POSTGRES_USER=aquamadi
POSTGRES_PASSWORD=secret
POSTGRES_DB=aquamadi_db
```

ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð»Ð¸ ÑÐµÑ€Ð²Ð¸Ñ docker, ÐµÑÐ»Ð¸ Ð´Ð°, Ñ‚Ð¾:
Ð¡Ñ‚Ñ€Ð¾Ð³Ð¾ Ð¿Ð¾Ð´ Linux (Ð»Ð¸Ð±Ð¾ wsl2)!
```
sudo docker-compose up -d
```

### Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ sqlx 

- Ð½ÑƒÐ¶Ð½Ð°Ñ ÑˆÑ‚ÑƒÐºÐ°

SQLx â€” ÑÑ‚Ð¾ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ð¹ Ð´Ñ€Ð°Ð¹Ð²ÐµÑ€ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð±Ð°Ð·Ð°Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² Rust, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑÐ¾Ñ‡ÐµÑ‚Ð°ÐµÑ‚ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ñ‚Ð¸Ð¿Ð¾Ð², Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¸ Ð³Ð¸Ð±ÐºÐ¾ÑÑ‚ÑŒ. Ð’Ð¾Ñ‚ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð°ÑÐ¿ÐµÐºÑ‚Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð·Ð½Ð°Ñ‚ÑŒ:
1. ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ SQLx

    Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ñ‚Ð¸Ð¿Ð¾Ð²: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ SQL-Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð½Ð° ÑÑ‚Ð°Ð¿Ðµ ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ð¸.
    ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ÐµÑÐ»Ð¸ Ð²Ñ‹ Ð¾Ð¿ÐµÑ‡Ð°Ñ‚Ð°Ð»Ð¸ÑÑŒ Ð² Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ð¸ ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ð»Ð¸ Ð½ÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ð´Ð°Ð½Ð½Ñ‹Ñ… â€” ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ‚Ð¾Ñ€ Rust Ð²Ñ‹Ð´Ð°ÑÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÑƒ.

    ÐÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾ÑÑ‚ÑŒ: Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ async/await Ñ‡ÐµÑ€ÐµÐ· Tokio Ð¸Ð»Ð¸ async-std (Ð² Ð²Ð°ÑˆÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Tokio).

    ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¡Ð£Ð‘Ð”: PostgreSQL, MySQL, SQLite. Ð’ Ð²Ð°ÑˆÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ â€” Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Postgres.

    ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ ORM: SQLx Ð½Ðµ Ð½Ð°Ð²ÑÐ·Ñ‹Ð²Ð°ÐµÑ‚ Ð¾Ð±ÑŠÐµÐºÑ‚Ð½Ð¾-Ñ€ÐµÐ»ÑÑ†Ð¸Ð¾Ð½Ð½Ð¾Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ. Ð’Ñ‹ Ð¿Ð¸ÑˆÐµÑ‚Ðµ "ÑÑ‹Ñ€Ñ‹Ðµ" SQL-Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹, Ð½Ð¾ Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¾Ð¹ Ð½Ð° ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ.

    ÐœÐ°ÐºÑ€Ð¾ÑÑ‹: ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, query! Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ SQL Ð¸ Ñ‚Ð¸Ð¿Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€ÑÐ¼Ð¾ Ð² ÐºÐ¾Ð´Ðµ.

```
cargo install sqlx-cli --no-default-features --features postgres
```

## Ð¢ÐµÑÑ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°

Ð’ ÐºÐ¾Ñ€Ð½Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
```
cargo run
```

Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ

```
> cargo run
   Compiling ...
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 2.33s
     Running `target/debug/aquamadi`
2025-04-28T14:55:45.348497Z  INFO aquamadi: âœ… Successfully connected to database
2025-04-28T14:55:45.348690Z  INFO aquamadi: ðŸš€ Server started on port 3000

```



